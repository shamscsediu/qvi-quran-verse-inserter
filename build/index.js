!function(){"use strict";var e,t={26:function(){var e=window.wp.blocks;function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},t.apply(this,arguments)}var a=window.wp.element,n=window.wp.blockEditor,r=window.wp.components,l=window.wp.notices,i=window.wp.data;const s=(e,t,a)=>e.split(t,a),o=e=>{const t=s(e,":",2),a=[];for(let e=1;e<=t[1];e++)a.push({label:"Verse "+e,value:e});return a};var c=JSON.parse('{"u2":"qvi/qvi-quran-verse-inserter"}');(0,e.registerBlockType)(c.u2,{edit:function(e){let{attributes:c,setAttributes:u}=e;const m=(0,n.useBlockProps)(),[h,p]=(0,a.useState)(!1),{createErrorNotice:f}=(0,i.useDispatch)(l.store),[v,y]=(0,a.useState)(null),[g,b]=(0,a.useState)([]),[d,w]=(0,a.useState)([]);(0,a.useEffect)((()=>{E()}),[]),(0,a.useEffect)((()=>{N()}),[]),(0,a.useEffect)((()=>{b([]),b(o(c.surahNumber))}),[]);const E=async()=>{await fetch("http://api.alquran.cloud/v1/meta").then((e=>e.json())).then((e=>{const t=e.data.surahs.references,a=[];t.map((e=>a.push({label:e.number+". "+e.englishName,value:e.number+":"+e.numberOfAyahs}))),y(a)})).catch((()=>{f("An error occurred! Please try again",{type:"snackbar",explicitDismiss:!0})}))},N=()=>{fetch("http://api.alquran.cloud/v1/edition/type/translation").then((e=>e.json())).then((e=>{const t=e.data,a=[];t.map((e=>a.push({label:e.language.toUpperCase()+"-"+e.englishName,value:e.identifier}))),w(a)})).catch((()=>{f("An error occurred! Please try again",{type:"snackbar",explicitDismiss:!0})}))};return v?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(n.InspectorControls,null,(0,a.createElement)(r.PanelBody,{title:"Quran Verse Settings",initialOpen:!0},(0,a.createElement)(r.PanelRow,null,(0,a.createElement)(r.SelectControl,{label:"Surah",value:c.surahNumber,options:v,onChange:e=>{return u({surahNumber:t=e}),b([]),u({verseNumber:1}),void b(o(t));var t},__nextHasNoMarginBottom:!0})),(0,a.createElement)(r.PanelRow,null,(0,a.createElement)(r.SelectControl,{label:"Verse",value:c.verseNumber,options:g,onChange:e=>u({verseNumber:e}),__nextHasNoMarginBottom:!0})),(0,a.createElement)(r.PanelRow,null,(0,a.createElement)(r.SelectControl,{label:"Translation",value:c.translationIdentifier,options:d,onChange:e=>u({translationIdentifier:e}),__nextHasNoMarginBottom:!0})),(0,a.createElement)(r.PanelRow,null,(0,a.createElement)(r.Button,{onClick:async()=>{try{p(!0);const e=s(c.surahNumber,":",2);u({surahRef:"["+e[0]+":"+c.verseNumber+"]"}),await fetch("http://api.alquran.cloud/v1/ayah/"+e[0]+":"+c.verseNumber+"/"+c.translationIdentifier).then((e=>e.json())).then((t=>{u({translation:t.data.text}),(async e=>{await fetch("https://api.alquran.cloud/v1/ayah/"+e[0]+":"+c.verseNumber).then((e=>e.json())).then((e=>{u({arabicAyat:e.data.text}),p(!1)})).catch((()=>{p(!1),f("An error occurred! Please try again",{type:"snackbar",explicitDismiss:!0})}))})(e),p(!1)})).catch((()=>{p(!1),f("An error occurred! Please try again",{type:"snackbar",explicitDismiss:!0})})).finally((()=>{p(!1)}))}catch(e){f("An error occurred! Please try again",{type:"snackbar",explicitDismiss:!0})}},variant:"primary",isBusy:h,disabled:h},"Get verse")),(0,a.createElement)(r.PanelRow,null,(0,a.createElement)(r.ToggleControl,{label:"Show Only Translation",help:c.showOnlyTranslation?"Showing only translation.":"Showing all.",checked:c.showOnlyTranslation,onChange:e=>{u({showOnlyTranslation:e})}})))),(0,a.createElement)("div",m,!c.showOnlyTranslation&&(0,a.createElement)(n.RichText.Content,t({},m,{tagName:"p",className:"qvi-arabic-ayat",style:{direction:"rtl",textAlign:"right",lineHeight:"2.5em",fontSize:"1.4em",fontFamily:"Alqalam"},value:c.arabicAyat})),(0,a.createElement)(r.Flex,{gap:2,align:"top",alignItems:"top",justify:"space-between"},c.translation&&(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.Dashicon,{icon:"format-quote"})),(0,a.createElement)(r.FlexBlock,{style:{fontStyle:"italic"}},(0,a.createElement)(n.RichText.Content,t({},m,{className:"qvi-translation",tagName:"p",value:c.translation})))),(0,a.createElement)(n.RichText.Content,t({tagName:"p"},m,{className:"qvi-surah-ref",style:{textAlign:"right",fontFamily:"sans-serif",fontStyle:"italic",fontSize:".8em"},value:c.surahRef})))):null},save:function(e){let{attributes:l}=e;const i=n.useBlockProps.save();return(0,a.createElement)("div",i,!l.showOnlyTranslation&&(0,a.createElement)(n.RichText.Content,t({},i,{tagName:"p",className:"qvi-arabic-ayat",style:{direction:"rtl",textAlign:"right",lineHeight:"2.5em",fontSize:"1.4em",fontFamily:"Alqalam"},value:l.arabicAyat})),(0,a.createElement)("div",{style:{display:"flex",alignItems:"top",justifyContent:"start",fontStyle:"italic"}},(0,a.createElement)(r.Dashicon,{icon:"format-quote"}),(0,a.createElement)(n.RichText.Content,t({},i,{className:"qvi-translation",tagName:"p",value:l.translation}))),(0,a.createElement)(n.RichText.Content,t({tagName:"p"},i,{className:"qvi-surah-ref",style:{textAlign:"right",fontFamily:"sans-serif",fontStyle:"italic",fontSize:".8em"},value:l.surahRef})))}})}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=function(t,a,r,l){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],l=e[u][2];for(var s=!0,o=0;o<a.length;o++)(!1&l||i>=l)&&Object.keys(n.O).every((function(e){return n.O[e](a[o])}))?a.splice(o--,1):(s=!1,l<i&&(i=l));if(s){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,r,l]},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,l,i=a[0],s=a[1],o=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(o)var u=o(n)}for(t&&t(a);c<i.length;c++)l=i[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},a=self.webpackChunkqvi_quran_verse_inserter=self.webpackChunkqvi_quran_verse_inserter||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var r=n.O(void 0,[431],(function(){return n(26)}));r=n.O(r)}();